<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="/static/test.css" />
    <title>Building Carbon Emissions</title>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <a href="/"><img src="/static/image/logo.png" alt="로고"></a>
            </div>
            <nav class="navbar">
                <a href="/">홈</a>
                <a href="introduce">소개</a>
                <a href="map">지도</a>
                <a href="statistics">통계</a>
                <a href="data">자료실</a>
            </nav>
        </div>
    </header>
    
    <div class="statistics-container">
        <div class="stats-main">
            <div class="map-section">
                <div class="map-info">
                    <h3>동별 탄소 배출량</h3>

                    <div class="options">
                        <label for="region-select">동:</label>
                        <select id="region-select">
                            <option value="all">모든 동</option>
                            <option value="신사동">신사동</option>
                            <option value="논현1동">논현1동</option>
                            <option value="논현2동">논현2동</option>
                            <option value="삼성1동">삼성1동</option>
                            <option value="삼성2동">삼성2동</option>
                            <option value="대치1동">대치1동</option>
                            <option value="대치4동">대치4동</option>
                            <option value="역삼1동">역삼1동</option>
                            <option value="역삼2동">역삼2동</option>
                            <option value="도곡1동">도곡1동</option>
                            <option value="도곡2동">도곡2동</option>
                            <option value="개포1동">개포1동</option>
                            <option value="개포2동">개포2동</option>
                            <option value="일원본동">일원본동</option>
                            <option value="일원1동">일원1동</option>
                            <option value="개포3동">개포3동</option>
                            <option value="수서동">수서동</option>
                            <option value="세곡동">세곡동</option>
                            <option value="압구정동">압구정동</option>
                            <option value="청담동">청담동</option>
                            <option value="대치2동">대치2동</option>
                            <option value="개포4동">개포4동</option>
                        </select>
                        <label for="month-select">월:</label>
                        <select id="month-select">
                            <option value="all">모든 월</option>
                            <option value="1">1월</option>
                            <option value="2">2월</option>
                            <option value="3">3월</option>
                            <option value="4">4월</option>
                            <option value="5">5월</option>
                            <option value="6">6월</option>
                            <option value="7">7월</option>
                            <option value="8">8월</option>
                            <option value="9">9월</option>
                            <option value="10">10월</option>
                            <option value="11">11월</option>
                            <option value="12">12월</option>
                        </select>
                    </div>
                </div>
                <div class="map-info-container">
                    <div>
                        <h3>전기 사용량 합계</h3>
                        <div class="stat-value" id="total-electricity">0 kWh</div>
                    </div>
                    <div>
                        <h3>가스 사용량 합계</h3>
                        <div class="stat-value" id="total-gas">0 m³</div>
                    </div>
                    <div>
                        <h3>탄소배출량</h3>
                        <div class="stat-value" id="total-emissions">0 tons</div>
                    </div>
                </div>
                <div class="map-container">
                    <svg xmlns="http://www.w3.org/2000/svg" width="460.8pt" height="345.6pt" viewBox="0 0 460.8 345.6">
                      <g id="figure_1">
                        <g id="axes_1">
                          <g id="PatchCollection_1">
                            <path id="신사동" d="M 142.746225 111.675516 L 140.660661 112.630021 L 136.009736 114.772474 L 126.225302 120.008155 L 122.094295 122.515537 L 122.183377 121.446494 L 121.099962 115.734735 L 120.837431 114.716651 L 119.32643 108.857442 L 118.604101 106.497776 L 117.714232 104.121994 L 116.739226 102.293359 L 116.43356 101.721067 L 115.333489 100.246232 L 110.524445 93.81934 L 103.986869 86.790335 L 105.7588 85.368517 L 112.568363 78.168364 L 114.762044 75.847984 L 116.348975 74.168687 L 119.179814 71.173176 L 122.26531 67.911085 L 123.572582 66.53254 L 123.865723 66.293289 L 125.641121 64.854633 L 127.172617 63.614114 L 133.576067 75.279663 L 133.844061 75.767277 L 134.008097 76.064773 L 135.967292 79.569831 L 137.048092 80.915829 L 138.19693 82.346379 L 139.191748 83.383247 L 139.856364 84.076571 L 141.141735 85.41816 L 142.556798 86.993404 L 143.306527 88.439575 L 143.382147 88.680286 L 143.908527 88.396113 L 144.045631 90.492055 L 143.972379 92.526606 L 143.888416 93.691009 L 143.45231 96.632572 L 143.147646 102.678383 L 142.976668 106.370329 L 142.947687 107.002069 L 142.746225 111.675516 " clip-path="url(#p705ad3a101)"/>    
                            <path id="논현1동" d="M 156.636434 148.420022 L 134.118991 156.919488 L 126.718107 137.457867 L 124.267754 138.133322 L 126.558292 137.040041 L 123.088561 125.367949 L 122.094295 122.515537 L 126.225302 120.008155 L 136.009736 114.772474 L 140.660661 112.630021 L 142.746225 111.675516 L 143.211251 112.039849 L 146.602118 121.225113 L 147.88944 124.712796 L 148.657367 126.793885 L 148.981496 127.674863 L 149.181236 128.217789 L 148.446807 128.801505 L 149.378706 128.752275 L 149.630707 129.434102 L 150.030363 130.515456 L 151.364255 134.129679 L 156.636434 148.420022 " clip-path="url(#p705ad3a101)" />
                            <path id="논현2동" d="M 169.286928 101.665411 L 174.221229 118.547767 L 171.899035 119.678504 L 174.392128 119.154921 L 178.554556 133.410276 L 180.256503 139.766611 L 156.636434 148.420022 L 151.364255 134.129679 L 150.030363 130.515456 L 149.630707 129.434102 L 149.378706 128.752275 L 148.446807 128.801505 L 149.181236 128.217789 L 148.981496 127.674863 L 148.657367 126.793885 L 147.88944 124.712796 L 146.602118 121.225113 L 143.211251 112.039849 L 142.746225 111.675516 L 148.579088 109.34056 L 154.012149 107.167345 L 156.584418 106.139231 L 165.056 102.779684 L 167.103449 101.968209 L 168.470693 101.428357 L 169.007772 101.584332 L 169.286928 101.665411 " clip-path="url(#p705ad3a101)" />    
                            <path id="삼성1동" d="M 235.719933 95.10733 L 234.607597 107.619751 L 236.189535 110.48074 L 239.114351 133.608744 L 239.256573 136.23634 L 239.309609 139.703079 L 236.686193 140.302653 L 234.73367 140.749691 L 220.259214 146.528631 L 211.163551 150.038454 L 209.933912 147.267318 L 207.824197 142.509091 L 206.272338 139.005335 L 206.221353 138.887761 L 206.1783 138.788459 L 201.876715 128.738308 L 201.592416 128.071315 L 200.925549 126.504179 L 199.235788 122.495177 L 197.510193 118.075487 L 195.814622 113.879704 L 197.858491 113.431941 L 210.037236 110.759269 L 211.889444 110.288856 L 212.650337 110.094943 L 213.740649 109.631379 L 214.48494 109.312071 L 215.026723 109.078611 L 215.248045 108.982375 L 216.27391 108.529429 L 219.841692 106.954048 L 220.421953 106.696765 L 220.567815 106.605262 L 222.776278 105.218695 L 223.720971 103.978253 L 231.662398 93.533729 L 235.719933 95.10733 " clip-path="url(#p705ad3a101)" />    
                            <path id="삼성2동" d="M 211.163551 150.038454 L 192.874304 157.445075 L 188.41588 158.721291 L 192.603772 156.741872 L 191.99538 155.206479 L 190.995954 152.688425 L 190.718655 151.990139 L 189.829766 150.833231 L 188.65586 149.877799 L 187.963322 149.320859 L 187.690088 149.108253 L 186.580327 148.247861 L 184.961017 146.992378 L 184.786975 146.839656 L 182.896066 145.155151 L 181.237251 142.965043 L 180.256503 139.766611 L 178.554556 133.410276 L 174.392128 119.154921 L 171.899035 119.678504 L 174.221229 118.547767 L 195.814622 113.879704 L 197.510193 118.075487 L 199.235788 122.495177 L 200.925549 126.504179 L 201.592416 128.071315 L 201.876715 128.738308 L 206.1783 138.788459 L 206.221353 138.887761 L 206.272338 139.005335 L 207.824197 142.509091 L 209.933912 147.267318 L 211.163551 150.038454 " clip-path="url(#p705ad3a101)" />    
                            <path id="대치1동" d="M 232.296297 200.626904 L 223.904134 202.584429 L 219.047744 203.737937 L 217.624655 204.1555 L 217.335603 204.248543 L 217.185797 204.296787 L 216.201749 204.617215 L 214.059983 205.707135 L 210.846374 207.824169 L 208.852625 200.488999 L 208.275944 198.368035 L 208.0706 197.716991 L 204.305412 187.633986 L 204.096603 187.091671 L 203.285327 184.98682 L 202.413444 183.756152 L 201.687593 181.932372 L 201.16509 179.577427 L 208.730009 179.079623 L 221.131396 174.094248 L 224.338418 181.37296 L 232.296297 200.626904 " clip-path="url(#p705ad3a101)" />    
                            <path id="대치4동" d="M 221.131396 174.094248 L 208.730009 179.079623 L 201.16509 179.577427 L 193.476396 159.050406 L 192.874304 157.445075 L 211.163551 150.038454 L 221.131396 174.094248 " clip-path="url(#p705ad3a101)" />    
                            <path id="역삼1동" d="M 188.41588 158.721291 L 177.869582 162.796524 L 167.423329 166.834103 L 164.184671 168.840512 L 167.563551 178.137623 L 173.376377 193.562484 L 151.222821 202.222742 L 141.686872 176.833572 L 138.938771 169.587486 L 134.180656 157.081535 L 134.118991 156.919488 L 156.636434 148.420022 L 180.256503 139.766611 L 181.237251 142.965043 L 182.896066 145.155151 L 184.786975 146.839656 L 184.961017 146.992378 L 186.580327 148.247861 L 187.690088 149.108253 L 187.963322 149.320859 L 188.65586 149.877799 L 189.829766 150.833231 L 190.718655 151.990139 L 190.995954 152.688425 L 191.99538 155.206479 L 192.603772 156.741872 L 188.41588 158.721291 " clip-path="url(#p705ad3a101)" />
                            <path id="역삼2동" d="M 201.16509 179.577427 L 201.687593 181.932372 L 187.253888 187.861743 L 173.376377 193.562484 L 167.563551 178.137623 L 164.184671 168.840512 L 167.423329 166.834103 L 177.869582 162.796524 L 188.41588 158.721291 L 192.874304 157.445075 L 193.476396 159.050406 L 201.16509 179.577427 " clip-path="url(#p705ad3a101)" />     
                            <path id="도곡1동" d="M 174.470223 214.18628 L 156.829131 216.516811 L 156.373717 215.606611 L 151.222821 202.222742 L 173.376377 193.562484 L 187.253888 187.861743 L 192.876099 201.230669 L 193.397656 202.484563 L 193.725987 203.274179 L 194.739795 205.71787 L 191.289291 207.717274 L 190.401006 207.837044 L 187.386045 209.432357 L 184.149297 211.27955 L 183.882571 211.431773 L 184.102936 211.816989 L 183.291517 212.200903 L 181.354715 212.981133 L 181.23324 213.029263 L 180.371969 213.199842 L 174.470223 214.18628 " clip-path="url(#p705ad3a101)" />    
                            <path id="도곡2동" d="M 210.846374 207.824169 L 210.755284 207.885896 L 199.288953 216.344486 L 197.786483 217.523365 L 197.237474 217.953852 L 194.957255 219.740733 L 190.623939 223.065586 L 190.130463 223.441494 L 186.002047 226.477005 L 183.527827 228.295313 L 182.857486 228.790942 L 181.666936 230.416469 L 181.557811 230.573201 L 180.678265 231.847466 L 174.926402 215.635886 L 174.470223 214.18628 L 180.371969 213.199842 L 181.23324 213.029263 L 181.354715 212.981133 L 183.291517 212.200903 L 184.102936 211.816989 L 183.882571 211.431773 L 184.149297 211.27955 L 187.386045 209.432357 L 190.401006 207.837044 L 191.289291 207.717274 L 194.739795 205.71787 L 193.725987 203.274179 L 193.397656 202.484563 L 192.876099 201.230669 L 187.253888 187.861743 L 201.687593 181.932372 L 202.413444 183.756152 L 203.285327 184.98682 L 204.096603 187.091671 L 204.305412 187.633986 L 208.0706 197.716991 L 208.275944 198.368035 L 208.852625 200.488999 L 210.846374 207.824169 " clip-path="url(#p705ad3a101)" />    
                            <path id="개포1동" d="M 258.311128 219.80882 L 257.077273 223.597199 L 254.509148 229.113248 L 253.905822 229.883412 L 252.804393 230.771294 L 251.422203 232.366762 L 250.624751 233.586592 L 249.825803 234.808742 L 250.188291 235.680308 L 250.99555 237.454582 L 253.449175 242.221965 L 260.110123 246.015506 L 257.693571 249.096068 L 257.195896 249.675587 L 252.341104 252.49905 L 249.328281 246.648398 L 244.930085 246.54285 L 242.405825 246.717415 L 241.175819 249.402267 L 225.127556 252.54646 L 216.058238 243.053691 L 214.745601 241.37561 L 207.588637 232.224114 L 206.581359 230.913216 L 204.248038 227.778055 L 204.183385 227.688391 L 203.698078 226.571808 L 199.288953 216.344486 L 210.755284 207.885896 L 211.480956 211.237304 L 211.578184 211.427002 L 212.966671 214.099639 L 213.443984 214.956495 L 214.296147 216.449973 L 230.410647 233.417529 L 230.57619 233.786688 L 237.169059 228.760349 L 243.939268 223.59896 L 244.122444 223.459318 L 248.878893 219.062596 L 253.022793 215.232317 L 256.205419 212.2907 L 256.349448 212.605766 L 258.311128 219.80882 " clip-path="url(#p705ad3a101)" />
                            <path id="개포4동" d="M 225.127556 252.54646 L 224.526283 260.432656 L 224.24597 262.177207 L 222.927229 264.251349 L 211.299191 265.874836 L 210.003477 265.979441 L 205.987746 265.553651 L 205.112363 265.238562 L 204.274572 264.93699 L 195.33013 260.813221 L 194.160077 259.643954 L 196.104222 257.980896 L 197.691371 256.618489 L 196.867054 255.620627 L 193.13541 251.110538 L 183.279185 239.152538 L 182.463103 237.102108 L 182.19106 236.4175 L 180.678265 231.847466 L 181.557811 230.573201 L 181.666936 230.416469 L 182.857486 228.790942 L 183.527827 228.295313 L 186.002047 226.477005 L 190.130463 223.441494 L 190.623939 223.065586 L 194.957255 219.740733 L 197.237474 217.953852 L 197.786483 217.523365 L 199.288953 216.344486 L 203.698078 226.571808 L 204.183385 227.688391 L 204.248038 227.778055 L 206.581359 230.913216 L 207.588637 232.224114 L 214.745601 241.37561 L 216.058238 243.053691 L 225.127556 252.54646 " clip-path="url(#p705ad3a101)" />    
                            <path id="일원본동" d="M 297.956685 239.229758 L 295.448876 238.887465 L 282.886506 242.942631 L 280.185004 244.387732 L 279.237351 245.22024 L 276.571139 244.728207 L 276.153918 244.700828 L 274.072434 244.876467 L 272.127809 245.044723 L 270.798608 245.254393 L 269.341235 245.532558 L 267.734345 246.388669 L 265.096783 246.556697 L 264.599924 246.565719 L 262.914473 246.474819 L 260.110123 246.015506 L 253.449175 242.221965 L 250.99555 237.454582 L 250.188291 235.680308 L 249.825803 234.808742 L 250.624751 233.586592 L 251.422203 232.366762 L 252.804393 230.771294 L 253.905822 229.883412 L 254.509148 229.113248 L 257.077273 223.597199 L 258.311128 219.80882 L 260.795586 209.505129 L 271.210502 204.837768 L 292.591243 196.81033 L 293.947348 200.013338 L 300.594914 208.816639 L 300.78275 209.257265 L 302.781526 222.451066 L 302.562324 223.745419 L 302.317526 224.164884 L 301.853608 224.828667 L 301.089741 226.004385 L 300.829454 226.405413 L 299.840277 228.402103 L 298.230018 232.389598 L 297.978999 235.33136 L 297.956685 239.229758 " clip-path="url(#p705ad3a101)" />
                            <path id="일원1동" d="M 306.923248 183.263397 L 319.415667 189.872873 L 315.123684 191.548236 L 312.846552 192.355949 L 310.629456 192.959685 L 308.383969 193.359607 L 306.284705 193.732191 L 305.334915 193.900471 L 303.004192 194.313419 L 296.845274 195.409751 L 296.248974 195.51761 L 294.453002 196.150237 L 293.947139 196.329588 L 292.591243 196.81033 L 271.210502 204.837768 L 266.547982 192.008607 L 265.978128 189.789841 L 267.058031 189.315526 L 268.421724 188.716588 L 269.425649 188.277448 L 269.577526 188.215647 L 282.919471 182.86795 L 287.118887 181.234511 L 291.929578 178.313525 L 306.923248 183.263397 " clip-path="url(#p705ad3a101)" />    
                            <path id="개포3동" d="M 275.572253 172.915113 L 291.929578 178.313525 L 287.118887 181.234511 L 282.919471 182.86795 L 269.577526 188.215647 L 269.425649 188.277448 L 268.421724 188.716588 L 267.058031 189.315526 L 265.978128 189.789841 L 266.547982 192.008607 L 271.210502 204.837768 L 260.795586 209.505129 L 262.210513 207.26114 L 260.224854 199.072899 L 258.531024 194.79989 L 257.829297 193.03256 L 255.987566 193.796796 L 254.807304 194.289116 L 254.940531 194.618863 L 249.62831 196.883593 L 248.727686 196.780217 L 247.374275 191.71845 L 248.8478 190.081798 L 251.190144 187.215537 L 251.54286 186.782498 L 251.768259 186.33221 L 252.050545 185.768275 L 252.12431 185.618421 L 252.192928 185.478995 L 252.834115 182.202642 L 253.121652 180.731005 L 253.273107 178.322778 L 253.220837 177.492011 L 253.204906 177.255146 L 252.990547 175.267948 L 252.97469 175.128797 L 252.72671 174.124802 L 254.113914 169.805988 L 256.11345 167.080337 L 275.572253 172.915113 " clip-path="url(#p705ad3a101)" />
                            <path id="수서동" d="M 334.178951 202.917361 L 339.085597 210.243124 L 342.364123 217.237544 L 344.068777 220.310378 L 343.831698 220.620367 L 343.356037 220.972282 L 342.788568 221.392115 L 341.950084 221.786092 L 341.251631 222.111579 L 341.102956 222.129175 L 339.84877 221.729507 L 338.704642 221.364921 L 334.522339 221.667598 L 332.526574 222.195491 L 331.307501 222.516397 L 330.842611 222.546194 L 330.400059 222.574535 L 328.113415 222.712895 L 326.558402 220.651751 L 324.250917 216.573074 L 320.98311 216.087737 L 320.040023 216.588839 L 313.505396 221.376095 L 311.995794 222.537085 L 311.294914 223.076605 L 309.893974 224.345851 L 309.182342 225.533958 L 308.410625 228.488129 L 308.232243 229.857537 L 308.565771 231.18704 L 308.681979 233.468448 L 308.363029 236.759907 L 304.576349 238.202736 L 297.956685 239.229758 L 297.978999 235.33136 L 298.230018 232.389598 L 299.840277 228.402103 L 300.829454 226.405413 L 301.089741 226.004385 L 301.853608 224.828667 L 302.317526 224.164884 L 302.562324 223.745419 L 302.781526 222.451066 L 300.78275 209.257265 L 300.594914 208.816639 L 293.947348 200.013338 L 292.591243 196.81033 L 293.947139 196.329588 L 294.453002 196.150237 L 296.248974 195.51761 L 296.845274 195.409751 L 303.004192 194.313419 L 305.334915 193.900471 L 306.284705 193.732191 L 308.383969 193.359607 L 310.629456 192.959685 L 312.846552 192.355949 L 315.123684 191.548236 L 319.415667 189.872873 L 319.778229 190.059047 L 320.025585 190.186083 L 323.437097 192.599547 L 325.165263 193.913168 L 326.191292 194.696642 L 328.303826 196.572352 L 334.178951 202.917361 " clip-path="url(#p705ad3a101)" />
                            <path id="세곡동" d="M 341.102956 222.129175 L 341.233624 222.250878 L 342.68107 223.620136 L 349.601474 235.421523 L 359.667443 252.685505 L 361.59412 256.042816 L 363.823863 259.972794 L 366.15801 264.673198 L 367.755506 268.595587 L 368.032254 270.864677 L 368.333131 273.591737 L 368.284759 274.384829 L 368.188058 274.822572 L 368.021519 275.538732 L 366.954396 276.095936 L 356.465753 284.706452 L 355.795746 285.758461 L 355.555861 286.611763 L 355.348057 287.454747 L 355.251355 288.198802 L 355.194988 288.88157 L 355.125777 289.737571 L 354.844997 293.84413 L 354.760064 295.488 L 352.021293 295.485632 L 347.340098 292.041251 L 346.38845 291.145312 L 345.509297 289.790657 L 345.820959 289.514753 L 346.32252 289.070807 L 346.506845 288.908737 L 346.679517 288.756535 L 346.74913 288.023346 L 343.458095 286.549444 L 341.697145 286.10511 L 334.470067 284.717497 L 330.597144 283.791391 L 329.797039 283.601194 L 326.033564 284.774965 L 325.429281 288.173219 L 324.175164 290.932431 L 323.089618 292.380195 L 316.048838 294.111333 L 310.44711 294.885717 L 307.180468 292.434457 L 305.911674 286.935586 L 305.767003 286.301103 L 305.358956 284.533699 L 305.14256 283.719662 L 302.800707 280.228795 L 300.455942 279.233808 L 298.840197 278.001378 L 287.851646 266.918197 L 281.747591 260.017706 L 279.325245 256.405323 L 278.616678 254.750327 L 277.634748 252.456822 L 279.015739 246.220742 L 279.237351 245.22024 L 280.185004 244.387732 L 282.886506 242.942631 L 295.448876 238.887465 L 297.956685 239.229758 L 304.576349 238.202736 L 308.363029 236.759907 L 308.681979 233.468448 L 308.565771 231.18704 L 308.232243 229.857537 L 308.410625 228.488129 L 309.182342 225.533958 L 309.893974 224.345851 L 311.294914 223.076605 L 311.995794 222.537085 L 313.505396 221.376095 L 320.040023 216.588839 L 320.98311 216.087737 L 324.250917 216.573074 L 326.558402 220.651751 L 328.113415 222.712895 L 330.400059 222.574535 L 330.842611 222.546194 L 331.307501 222.516397 L 332.526574 222.195491 L 334.522339 221.667598 L 338.704642 221.364921 L 339.84877 221.729507 L 341.102956 222.129175 " clip-path="url(#p705ad3a101)" />
                            <path id="압구정동" d="M 185.50704 72.740103 L 180.80566 87.612159 L 180.314442 89.165675 L 175.610682 87.766535 L 174.128773 87.267072 L 173.158719 86.940138 L 171.675852 91.069415 L 170.154472 96.435243 L 169.639933 98.250513 L 169.153582 99.968257 L 169.161025 100.800158 L 169.16533 101.149999 L 169.166626 101.254837 L 169.286928 101.665411 L 169.007772 101.584332 L 168.470693 101.428357 L 167.103449 101.968209 L 165.056 102.779684 L 156.584418 106.139231 L 154.012149 107.167345 L 148.579088 109.34056 L 142.746225 111.675516 L 142.947687 107.002069 L 142.976668 106.370329 L 143.147646 102.678383 L 143.45231 96.632572 L 143.888416 93.691009 L 143.972379 92.526606 L 144.045631 90.492055 L 143.908527 88.396113 L 143.382147 88.680286 L 143.306527 88.439575 L 142.556798 86.993404 L 141.141735 85.41816 L 139.856364 84.076571 L 139.191748 83.383247 L 138.19693 82.346379 L 137.048092 80.915829 L 135.967292 79.569831 L 134.008097 76.064773 L 133.844061 75.767277 L 133.576067 75.279663 L 127.172617 63.614114 L 137.059375 56.582419 L 143.237129 54.581837 L 143.340155 54.547362 L 146.999206 53.568 L 158.968839 59.420087 L 166.029269 62.872484 L 166.482033 63.101155 L 169.303668 64.530413 L 185.50704 72.740103 " clip-path="url(#p705ad3a101)" />
                            <path id="청담동" d="M 210.864042 82.992404 L 219.676187 87.752339 L 231.662398 93.533729 L 223.720971 103.978253 L 222.776278 105.218695 L 220.567815 106.605262 L 220.421953 106.696765 L 219.841692 106.954048 L 216.27391 108.529429 L 215.248045 108.982375 L 215.026723 109.078611 L 214.48494 109.312071 L 213.740649 109.631379 L 212.650337 110.094943 L 211.889444 110.288856 L 210.037236 110.759269 L 197.858491 113.431941 L 195.814622 113.879704 L 174.221229 118.547767 L 169.286928 101.665411 L 169.166626 101.254837 L 169.16533 101.149999 L 169.161025 100.800158 L 169.153582 99.968257 L 169.639933 98.250513 L 170.154472 96.435243 L 171.675852 91.069415 L 173.158719 86.940138 L 174.128773 87.267072 L 175.610682 87.766535 L 180.314442 89.165675 L 180.80566 87.612159 L 185.50704 72.740103 L 192.911549 72.591743 L 210.864042 82.992404 " clip-path="url(#p705ad3a101)" />
                            <path id="대치2동" d="M 240.123423 140.551647 L 241.609585 151.263026 L 242.297036 154.46053 L 242.521552 155.495181 L 242.968971 156.206166 L 243.030801 156.304411 L 245.883495 160.101291 L 248.934546 162.8096 L 249.343184 163.172161 L 249.947049 163.706822 L 250.591121 164.277038 L 256.11345 167.080337 L 254.113914 169.805988 L 252.72671 174.124802 L 252.97469 175.128797 L 252.990547 175.267948 L 253.204906 177.255146 L 253.220837 177.492011 L 253.273107 178.322778 L 253.121652 180.731005 L 252.834115 182.202642 L 252.192928 185.478995 L 252.12431 185.618421 L 252.050545 185.768275 L 251.768259 186.33221 L 251.54286 186.782498 L 251.190144 187.215537 L 248.8478 190.081798 L 247.374275 191.71845 L 239.468276 197.788843 L 238.202868 198.570681 L 237.75727 198.845992 L 236.308081 199.491068 L 236.203429 199.525508 L 234.457023 200.082105 L 234.251951 200.141731 L 232.296297 200.626904 L 224.338418 181.37296 L 221.131396 174.094248 L 211.163551 150.038454 L 220.259214 146.528631 L 234.73367 140.749691 L 236.686193 140.302653 L 239.309609 139.703079 L 240.123423 140.551647 " clip-path="url(#p705ad3a101)" />
                            <path id="개포2동" d="M 260.795586 209.505129 L 258.311128 219.80882 L 256.349448 212.605766 L 256.205419 212.2907 L 253.022793 215.232317 L 248.878893 219.062596 L 244.122444 223.459318 L 243.939268 223.59896 L 237.169059 228.760349 L 230.57619 233.786688 L 230.410647 233.417529 L 214.296147 216.449973 L 213.443984 214.956495 L 212.966671 214.099639 L 211.578184 211.427002 L 211.480956 211.237304 L 210.755284 207.885896 L 210.846374 207.824169 L 214.059983 205.707135 L 216.201749 204.617215 L 217.185797 204.296787 L 217.335603 204.248543 L 217.624655 204.1555 L 219.047744 203.737937 L 223.904134 202.584429 L 232.296297 200.626904 L 234.251951 200.141731 L 234.457023 200.082105 L 236.203429 199.525508 L 236.308081 199.491068 L 237.75727 198.845992 L 238.202868 198.570681 L 239.468276 197.788843 L 247.374275 191.71845 L 248.727686 196.780217 L 249.62831 196.883593 L 254.940531 194.618863 L 254.807304 194.289116 L 255.987566 193.796796 L 257.829297 193.03256 L 258.531024 194.79989 L 260.224854 199.072899 L 262.210513 207.26114 L 260.795586 209.505129 " clip-path="url(#p705ad3a101)" />
                        </g>
                      </g>
                      <defs>
                        <clipPath id="pd7648dfe57">
                          <rect x="127.428492" y="41.472" width="217.463016" height="266.112"/>
                        </clipPath>
                      </defs>
                    </svg>
                    <div class="popup" id="popup"></div>
                </div>
            </div>
            
            <div class="table-section">
                <div class="table">
                    <div class="table-info">
                        <h3>강남구 행정동별 탄소배출량 순위</h3>
                        
                        <div class="options">
                            <label for="rank-month-select">월:</label>
                            <select id="rank-month-select">
                                <option value="all">모든 월</option>
                                <option value="1">1월</option>
                                <option value="2">2월</option>
                                <option value="3">3월</option>
                                <option value="4">4월</option>
                                <option value="5">5월</option>
                                <option value="6">6월</option>
                                <option value="7">7월</option>
                                <option value="8">8월</option>
                                <option value="9">9월</option>
                                <option value="10">10월</option>
                                <option value="11">11월</option>
                                <option value="12">12월</option>
                            </select>
                        </div>
                    </div>
                    <table id="rankTable">
                        <thead>
                            <tr>
                                <th>순위</th>
                                <th>행정동</th>
                                <th>전기 사용량 (kWh)</th>
                                <th>가스 사용량 (m³)</th>
                                <th>탄소 배출량 (tons)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- 순위 데이터가 여기 추가됩니다 -->
                        </tbody>
                    </table>
                    
                    <div id="pagination" class="pagination">
                        <!-- 페이지네이션 버튼들이 여기 추가됩니다 -->
                    </div>
                </div>
            </div>

            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script>
                document.addEventListener("DOMContentLoaded", function() {
                    const regions = {
                        '신사동': 50,
                        '논현1동': 60,
                        '논현2동': 15,
                        '삼성1동': 20,
                        '삼성2동': 134,
                        '대치1동': 143,
                        '대치4동': 155,
                        '역삼1동': 102,
                        '역삼2동': 99,
                        '도곡1동': 57,
                        '도곡2동': 150,
                        '개포1동': 200,
                        '개포2동': 130,
                        '일원본동': 160,
                        '일원1동': 178,
                        '개포3동': 188,
                        '수서동': 144,
                        '세곡동': 123,
                        '압구정동': 145,
                        '청담동': 105,
                        '대치2동': 100,
                        '개포4동': 100
                    };
                    // 행정동별 순위 표 만들기
                    const sortedRegions = Object.entries(regions).sort((a, b) => b[1] - a[1]);
                    const labels = sortedRegions.map(region => region[0]);
                    const data = sortedRegions.map(region => region[1]);
                    
                    const itemsPerPage = 10;
                    let currentPage = 1;
                    const totalPages = Math.ceil(sortedRegions.length / itemsPerPage);

                    function renderTablePage(page) {
                        const rankTableBody = document.querySelector("#rankTable tbody");
                        rankTableBody.innerHTML = '';
                        const start = (page - 1) * itemsPerPage;
                        const end = start + itemsPerPage;
                        sortedRegions.slice(start, end).forEach((region, index) => {
                            const row = document.createElement("tr");
                            row.innerHTML = `<td>${start + index + 1}</td><td>${region[0]}</td><td>${region[1]}</td>`;
                            rankTableBody.appendChild(row);
                        });
                    }

                    function renderPagination() {
                        const pagination = document.getElementById("pagination");
                        pagination.innerHTML = '';

                        for (let i = 1; i <= totalPages; i++) {
                            const button = document.createElement("button");
                            button.innerText = i;
                            button.disabled = i === currentPage;
                            button.addEventListener("click", () => {
                                currentPage = i;
                                renderTablePage(currentPage);
                                renderPagination();
                            });
                            pagination.appendChild(button);
                        }
                    }

                    renderTablePage(currentPage);
                    renderPagination();
                });
            </script>
            
        </div>
        <div class="building-section" id="building-type-section">
            <h2 id="chart-title">강남구 건물용도별 탄소배출량</h2>
            <div class="options">
                <label for="building-type-month-select">월:</label>
                <select id="building-type-month-select">
                    <option value="all">모든 월</option>
                    <option value="1">1월</option>
                    <option value="2">2월</option>
                    <option value="3">3월</option>
                    <option value="4">4월</option>
                    <option value="5">5월</option>
                    <option value="6">6월</option>
                    <option value="7">7월</option>
                    <option value="8">8월</option>
                    <option value="9">9월</option>
                    <option value="10">10월</option>
                    <option value="11">11월</option>
                    <option value="12">12월</option>
                </select>
            </div>
            
            <div class="chart-section">
                <canvas id="buildingTypeChart"></canvas>
            </div>
        </div>
        <!-- 맨 밑 차트 추가-->
        <div class="stats-timeline">
            <div class="chart-section">
                <div class="options">
                    <label for="chart-type-select">차트 타입:</label>
                    <select id="chart-type-select">
                        <option value="region">동별 비교</option>
                        <option value="month">월별 비교</option>
                    </select>
                    <label for="region-filter-select" style="display: none;">기준:</label>
                    <select id="region-filter-select" style="display: none;">
                        <option value="emissions">탄소 배출량</option>
                        <option value="electricity">전기 사용량</option>
                        <option value="gas">가스 사용량</option>
                    </select>
                    <div id="region-checkboxes" style="display: none;">
                        <label>동 선택:</label>
                        <div>
                            <!-- 체크박스들이 여기에 추가됩니다 -->
                        </div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="comparisonChart"></canvas>
                </div>
            </div>
        </div>
    </div>
    
    <footer class="footer">
        군산대학교 소프트웨어학전공 캡스톤디자인 프로젝트<br />나랑 데이터 할래?
    </footer>
    <script>
       const regionsData = {
        '신사동': { emissions: 50, electricity: 1000, gas: 500, monthly: [100, 120, 130, 110, 115, 140, 150, 160, 170, 180, 190, 200] },
        '논현1동': { emissions: 60, electricity: 1100, gas: 550, monthly: [110, 130, 140, 120, 125, 150, 160, 170, 180, 190, 200, 210] },
        '논현2동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '삼성1동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '삼성2동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '대치1동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '대치4동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '역삼1동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '역삼2동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '도곡1동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '도곡2동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '개포1동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '개포2동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '일원본동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '일원1동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '개포3동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '수서동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '세곡동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '압구정동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '청담동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '대치2동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] },
        '개포4동': { emissions: 15, electricity: 1200, gas: 600, monthly: [120, 140, 150, 130, 135, 160, 170, 180, 190, 200, 210, 220] }
        // 나머지 데이터 추가
    };
    const buildingTypesData = {
        '신사동': {
            '주거용': { emissions: 500, electricity: 10000, gas: 5000, monthly: [1000, 1200, 1300, 1100, 1150, 1400, 1500, 1600, 1700, 1800, 1900, 2000] },
            '상업용': { emissions: 600, electricity: 11000, gas: 5500, monthly: [1100, 1300, 1400, 1200, 1250, 1500, 1600, 1700, 1800, 1900, 2000, 2100] },
            // ... 신사동의 다른 건물용도
        },
        '논현1동': {
            '주거용': { emissions: 450, electricity: 9000, gas: 4500, monthly: [900, 1100, 1200, 1000, 1050, 1300, 1400, 1500, 1600, 1700, 1800, 1900] },
            '상업용': { emissions: 550, electricity: 10500, gas: 5200, monthly: [1000, 1200, 1300, 1100, 1150, 1400, 1500, 1600, 1700, 1800, 1900, 2000] },
            // ... 논현1동의 다른 건물용도
        },
        // ... 다른 동의 데이터
    };
    const initialBuildingTypeData = {};

const buildingTypeChartCtx = document.getElementById('buildingTypeChart').getContext('2d');

        document.addEventListener("DOMContentLoaded", function() {
            const regionSelect = document.getElementById('region-select');
            const monthSelect = document.getElementById('month-select');
            const totalElectricity = document.getElementById('total-electricity');
            const totalGas = document.getElementById('total-gas');
            const totalEmissions = document.getElementById('total-emissions');

            const rankMonthSelect = document.getElementById('rank-month-select');
            const buildingTypeMonthSelect = document.getElementById('building-type-month-select');
            const chartTitle = document.getElementById('chart-title');
            const ctx = document.getElementById('buildingTypeChart').getContext('2d');

            const scaleFactor = 1.05;


            monthSelect.addEventListener('change', updateAllData);
            regionSelect.addEventListener('change', updateAllData);
            function updateAllData() {
                const selectedMonth = monthSelect.value;
                updateData();
                updateRanking();
                rankMonthSelect.value = selectedMonth;
                buildingTypeMonthSelect.value = selectedMonth;
                const selectedRegion = regionSelect.value;
                updateBuildingTypeData(selectedRegion);
            }

            Object.values(buildingTypesData).forEach(region => {
            Object.entries(region).forEach(([type, data]) => {
                if (!initialBuildingTypeData[type]) {
                    initialBuildingTypeData[type] = { emissions: 0, electricity: 0, gas: 0 };
                }
                initialBuildingTypeData[type].emissions += data.emissions;
                initialBuildingTypeData[type].electricity += data.electricity;
                initialBuildingTypeData[type].gas += data.gas;
                });
            });

            const buildingTypeChart = new Chart(buildingTypeChartCtx, {
                type: 'bar',
                data: {
                    labels: Object.keys(initialBuildingTypeData),
                    datasets: [{
                        label: '탄소 배출량 (tons)',
                        data: Object.values(initialBuildingTypeData).map(data => data.emissions),
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: '강남구 건물용도별 탄소배출량'
                        }
                    }
                }
            });

            //순위 표 업데이트 스크립트, 건물용도별 데이터 업데이트
            document.querySelectorAll("path").forEach(path => {
                const originalD = path.getAttribute("d");
                const scaledD = originalD.replace(/([0-9.]+)/g, (match) => parseFloat(match) * scaleFactor);
                path.setAttribute("d", scaledD);

                path.addEventListener('click', () => {
                    const regionId = path.id;
                    regionSelect.value = regionId;
                    monthSelect.value = 'all'; // 월 선택을 모든 월로 변경
                    rankMonthSelect.value = 'all'; 
                    buildingTypeMonthSelect.value = 'all'; 
                    updateData();
                    updateBuildingTypeData(regionId);
                });
            });

            regionSelect.addEventListener('change', updateAllData);
            monthSelect.addEventListener('change', updateAllData);
            rankMonthSelect.addEventListener('change', updateAllData);
            buildingTypeMonthSelect.addEventListener('change', updateAllData);
            rankMonthSelect.addEventListener('change', () => {
                updateRanking();
                updateData(); // 월을 변경할 때 데이터도 업데이트
            });
            buildingTypeMonthSelect.addEventListener('change', () => {
                const selectedRegion = regionSelect.value;
                updateBuildingTypeData(selectedRegion);
            });

    function updateData() {
        const selectedRegion = regionSelect.value;
        const selectedMonth = monthSelect.value;

        let totalElectricityValue = 0;
        let totalGasValue = 0;
        let totalEmissionsValue = 0;

        if (selectedRegion === 'all') {
            Object.values(regionsData).forEach(data => {
                if (selectedMonth === 'all') {
                    totalElectricityValue += data.electricity;
                    totalGasValue += data.gas;
                    totalEmissionsValue += data.emissions;
                } else {
                    const monthIndex = parseInt(selectedMonth, 10) - 1;
                    totalElectricityValue += data.monthly[monthIndex];
                    totalGasValue += data.monthly[monthIndex];
                    totalEmissionsValue += data.monthly[monthIndex];
                }
            });
        } else {
            const data = regionsData[selectedRegion];
            if (selectedMonth === 'all') {
                totalElectricityValue = data.electricity;
                totalGasValue = data.gas;
                totalEmissionsValue = data.emissions;
            } else {
                const monthIndex = parseInt(selectedMonth, 10) - 1;
                totalElectricityValue = data.monthly[monthIndex];
                totalGasValue = data.monthly[monthIndex];
                totalEmissionsValue = data.monthly[monthIndex];
            }
        }

        totalElectricity.textContent = `${totalElectricityValue} kWh`;
        totalGas.textContent = `${totalGasValue} m³`;
        totalEmissions.textContent = `${totalEmissionsValue} tons`;
    }

    function renderTablePage(page) {
    const rankTableBody = document.querySelector("#rankTable tbody");
    rankTableBody.innerHTML = '';
    const start = (page - 1) * itemsPerPage;
    const end = start + itemsPerPage;
    sortedRegions.slice(start, end).forEach((data, index) => {
        const row = document.createElement("tr");
        row.innerHTML = `<td>${start + index + 1}</td><td>${data.region}</td><td>${data.electricity}</td><td>${data.gas}</td><td>${data.emissions}</td>`;
        rankTableBody.appendChild(row);
        });
    }

    function updateBuildingTypeData(regionId) {
        const selectedMonth = monthSelect.value;
        const buildingTypeData = buildingTypesData[regionId] || {};

        let sortedBuildingTypes = Object.entries(buildingTypeData).map(([type, data]) => {
            const emissions = selectedMonth === 'all' ? data.emissions : data.monthly[parseInt(selectedMonth, 10) - 1];
            const electricity = selectedMonth === 'all' ? data.electricity : data.monthly[parseInt(selectedMonth, 10) - 1];
            const gas = selectedMonth === 'all' ? data.gas : data.monthly[parseInt(selectedMonth, 10) - 1];
            return { type, emissions, electricity, gas };
        }).sort((a, b) => b.emissions - a.emissions);

        renderBuildingTypeChart(regionId, sortedBuildingTypes);
    }

    function renderBuildingTypeChart(regionId, sortedBuildingTypes) {
        const labels = sortedBuildingTypes.map(data => data.type);
        const data = {
            labels: labels,
            datasets: [{
                label: '탄소 배출량 (tons)',
                data: sortedBuildingTypes.map(data => data.emissions),
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 1
            }]
        };

        if(regionId=='all'){regionId = '강남구'}
        else{chartTitle.textContent = `${regionId} 건물용도별 탄소배출량`;}
        
        buildingTypeChart.data.labels = labels;
        buildingTypeChart.data.datasets[0].data = sortedBuildingTypes.map(data => data.emissions);
        buildingTypeChart.update();
    }

    function updateRanking() {
        const selectedMonth = monthSelect.value;
        const sortedRegions = Object.entries(regionsData).map(([region, data]) => {
            const emissions = selectedMonth === 'all' ? data.emissions : data.monthly[parseInt(selectedMonth, 10) - 1];
            const electricity = selectedMonth === 'all' ? data.electricity : data.monthly[parseInt(selectedMonth, 10) - 1];
            const gas = selectedMonth === 'all' ? data.gas : data.monthly[parseInt(selectedMonth, 10) - 1];
            return { region, emissions, electricity, gas };
        }).sort((a, b) => b.emissions - a.emissions);

        const itemsPerPage = 10;
        let currentPage = 1;
        const totalPages = Math.ceil(sortedRegions.length / itemsPerPage);

        function renderTablePage(page) {
            const rankTableBody = document.querySelector("#rankTable tbody");
            rankTableBody.innerHTML = '';
            const start = (page - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            sortedRegions.slice(start, end).forEach((data, index) => {
                const row = document.createElement("tr");
                row.innerHTML = `<td>${start + index + 1}</td><td>${data.region}</td><td>${data.electricity}</td><td>${data.gas}</td><td>${data.emissions}</td>`;
                rankTableBody.appendChild(row);
            });
        }

        function renderPagination() {
            const pagination = document.getElementById("pagination");
            pagination.innerHTML = '';

            for (let i = 1; i <= totalPages; i++) {
                const button = document.createElement("button");
                button.innerText = i;
                button.disabled = i === currentPage;
                button.addEventListener("click", () => {
                    currentPage = i;
                    renderTablePage(currentPage);
                    renderPagination();
                });
                pagination.appendChild(button);
            }
        }

        renderTablePage(currentPage);
        renderPagination();
        updateChart(sortedRegions);
    }


const chartTypeSelect = document.getElementById('chart-type-select');
    const regionFilterSelect = document.getElementById('region-filter-select');
    const regionCheckboxesContainer = document.getElementById('region-checkboxes');
    let chartInstance;

    chartTypeSelect.addEventListener('change', updateChart);
    regionFilterSelect.addEventListener('change', updateChart);

    function updateChart() {
        const chartType = chartTypeSelect.value;
        let labels, datasets, chartTitle;

        if (chartType === 'region') {
            regionFilterSelect.style.display = 'inline';
            regionCheckboxesContainer.style.display = 'none';

            const filterType = regionFilterSelect.value;
            const sortedRegions = Object.entries(regionsData).map(([region, data]) => {
                const totalUsage = data.electricity + data.gas;
                return { 
                    region, 
                    value: filterType === 'emissions' ? data.emissions : filterType === 'electricity' ? data.electricity : filterType === 'gas' ? data.gas : totalUsage 
                };
            }).sort((a, b) => b.value - a.value);

            labels = sortedRegions.map(data => data.region);
            const data = sortedRegions.map(data => data.value);
            chartTitle = `동별 ${filterType === 'emissions' ? '탄소 배출량' : filterType === 'electricity' ? '전기 사용량' : filterType === 'gas' ? '가스 사용량' : '전체 사용량'} (tons)`;

            datasets = [{
                label: chartTitle,
                data: data,
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 1
            }];
        } else if (chartType === 'month') {
            regionFilterSelect.style.display = 'none';
            regionCheckboxesContainer.style.display = 'block';

            const selectedRegions = Array.from(regionCheckboxesContainer.querySelectorAll('input[type="checkbox"]:checked')).map(checkbox => checkbox.value);
            labels = Array.from({ length: 12 }, (_, i) => `${i + 1}월`);

            datasets = selectedRegions.map(region => {
                const regionData = regionsData[region].monthly;
                const color = `rgba(${Math.floor(Math.random() * 255)}, ${Math.floor(Math.random() * 255)}, ${Math.floor(Math.random() * 255)}, 0.2)`;
                const borderColor = color.replace('0.2', '1');
                return {
                    label: region,
                    data: regionData,
                    backgroundColor: color,
                    borderColor: borderColor,
                    borderWidth: 1
                };
            });
            chartTitle = '월별 탄소 배출량 (tons)';
        }

        if (chartInstance) {
            chartInstance.data.labels = labels;
            chartInstance.data.datasets = datasets;
            chartInstance.options.plugins.title.text = chartTitle;
            chartInstance.update();
        } else {
            const ctx = document.getElementById('comparisonChart').getContext('2d');
            chartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: datasets
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: chartTitle
                        }
                    }
                }
            });
        }
    }
    document.getElementById('building-type-month-select').addEventListener('change', function () {
        const selectedMonth = this.value;
        const updatedBuildingTypeData = {};

        Object.values(buildingTypesData).forEach(region => {
            Object.entries(region).forEach(([type, data]) => {
                if (!updatedBuildingTypeData[type]) {
                    updatedBuildingTypeData[type] = { emissions: 0, electricity: 0, gas: 0 };
                }
                if (selectedMonth === 'all') {
                    updatedBuildingTypeData[type].emissions += data.emissions;
                    updatedBuildingTypeData[type].electricity += data.electricity;
                    updatedBuildingTypeData[type].gas += data.gas;
                } else {
                    const monthIndex = parseInt(selectedMonth, 10) - 1;
                    updatedBuildingTypeData[type].emissions += data.monthly[monthIndex];
                    updatedBuildingTypeData[type].electricity += data.monthly[monthIndex];
                    updatedBuildingTypeData[type].gas += data.monthly[monthIndex];
                }
            });
        });

        buildingTypeChart.data.datasets[0].data = Object.values(updatedBuildingTypeData).map(data => data.emissions);
        buildingTypeChart.update();
    });

    function createRegionCheckboxes() {
        const checkboxContainer = regionCheckboxesContainer.querySelector('div');
        checkboxContainer.innerHTML = '';

        Object.keys(regionsData).forEach(region => {
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.value = region;
            checkbox.id = `checkbox-${region}`;
            checkbox.addEventListener('change', updateChart);

            const label = document.createElement('label');
            label.htmlFor = `checkbox-${region}`;
            label.textContent = region;

            checkboxContainer.appendChild(checkbox);
            checkboxContainer.appendChild(label);
        });
    }

    createRegionCheckboxes();
    updateChart(); // Initialize chart with default values

                updateData(); // Initialize with default values
                updateRanking(); // Initialize ranking with default values

            Object.keys(regionsData).forEach(regionId => {
                const regionElement = document.getElementById(regionId);
            if (regionElement) {
                    regionElement.addEventListener('click', () => {
                    const data = regionsData[regionId];
                    document.getElementById('total-electricity').textContent = `${data.electricity} kWh`;
                    document.getElementById('total-gas').textContent = `${data.gas} m³`;
                    document.getElementById('total-emissions').textContent = `${data.emissions} tons`;
                });
            }
        });
    });
      </script>
    <script>
       const regions = {
        '신사동': 50,
        '논현1동': 60,
        '논현2동': 15,
        '삼성1동': 20,
        '삼성2동': 134,
        '대치1동': 143,
        '대치4동': 155,
        '역삼1동': 102,
        '역삼2동': 99,
        '도곡1동': 57,
        '도곡2동': 150,
        '개포1동': 200,
        '개포2동': 130,
        '일원본동': 160,
        '일원1동': 178,
        '개포3동': 188,
        '수서동': 144,
        '세곡동': 123,
        '압구정동': 145,
        '청담동': 105,
        '대치2동': 100,
        '개포4동': 100
};
// Find the maximum and minimum values of the emissions
const values = Object.values(regions);
    const maxEmission = Math.max(...values);
    const minEmission = Math.min(...values);

    // Function to calculate color based on emission value
    function getColor(emission) {
        const normalized = (emission - minEmission) / (maxEmission - minEmission);
        const greenValue = 198 - Math.round(normalized * 54); // Range from 198 to 144 for green shades
        return `rgb(${greenValue}, 215, ${greenValue})`;
    }

    Object.keys(regions).forEach(regionId => {
        const regionElement = document.getElementById(regionId);
        if (regionElement) {
            const emission = regions[regionId];
            const color = getColor(emission);
            regionElement.style.fill = color;
        }
    });
        const popup = document.getElementById('popup');

        Object.keys(regions).forEach(regionId => {
            const regionElement = document.getElementById(regionId);
            regionElement.addEventListener('mouseover', (event) => {
                const regionName = event.target.id;
                const emissionData = regions[regionName];
                popup.innerHTML = `탄소 배출량: ${emissionData}, 지역명 : ${regionId}`;
                popup.style.display = 'block';
                popup.style.left = `${event.pageX + 10}px`;
                popup.style.top = `${event.pageY + 10}px`;

                // Add the hovered class to make the region darker
                regionElement.classList.add('hovered');
            });

            regionElement.addEventListener('mouseout', () => {
                popup.style.display = 'none';

                // Remove the hovered class
                regionElement.classList.remove('hovered');
            });

            regionElement.addEventListener('mousemove', (event) => {
                popup.style.left = `${event.pageX + 10}px`;
                popup.style.top = `${event.pageY + 10}px`;
            });
        });
    </script>
</body>
</html>
